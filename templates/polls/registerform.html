{% load static %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <div class="header">
        <img src="{% static "images/head.png"%}" class="head">

     </div>
    <img src="images/s_logo_2.png" class="logo2">
    <img src="/static/images/s_logo_1.png" class="logo1">
    <div class="header2">
    <img src="images/arrow.png" class="arrow">
        <img src="images/search.png" class="search">
        
        <input type="text" class="searchb" >
        
        <span class="rightt">Sign in/up</span>
    
 <img src="images/glare.png" class="glare">  
    </div>
    
    <title>Sarvasv-IITBHU</title>
 <!-- css-->
    <link rel="stylesheet" type="text/css" href="/static/stylesheets/layout.css">
    <link rel="stylesheet" type="text/css" href="/static/stylesheets/main.css">
     <link rel="stylesheet" type="text/css" href="/static/stylesheets/home.css">
	<link rel="stylesheet" type="text/css" href="/static/stylesheets/registerform.css">
 <!-- Scripts -->
    <script src="/static/scripts/jquery-2.2.1.min.js" type="text/javascript"></script>
    
     <script src="/static/scripts/layout.js" type="text/javascript"></script>
      <script src="/static/scripts/home.js" type="text/javascript" >
    </script>
  <div class="messagebox"><div class="messagetitle"></div><div class="messagetext"></div>
</div><div class="closingmessage">Â«</div>
    
</head>

<body>
<div class="loaderfade"></div>
<div class="border4"><div class="border3"></div><div class="border2"></div><div class="border1"></div><img src="images/s_logo_2.png" class="flags"><img src="images/s_logo_1.png" class="globe"></div>    
    <div class="bodym">
    
    <img src="images/logobed.png" class="logobed">
    <ul>
        <li><span class="plus">Events</span>
        <ul>
                <li><a href="#">kulfi</a></li>
                <li>cone</li>
                <li>cup</li>
                <li>bar</li>
                <li>hello</li>
            <li>hello1</li>
            <li>hello2</li>
            <li>hello3</li>
            <li>hello4</li>
            </ul></li>
        <li ><span class="plus">Leaderboard</span>
            <ul>
                <li>kulfi</li>
                <li>cone</li>
                <li>cup</li>
            </ul>
        </li>
        <li><a>Forum</a></li>
        <li><a>Library</a></li>
        <li><a>About Us</a></li>
    </ul>
    <form method="post" action="">
    <fieldset>
        <legend>Login</legend>
        <input type="text" name="uname" placeholder="User name">
        <br><input type="password" name="pwd" placeholder="Password">
        <br><input type="submit" value=" Login ">
        <ul><li><a href="#">Forgot Password ?</a></li><li><a href="#">Register</a></li></ul>
        </fieldset>
    </form>
    <img src="images/menu_foot.png" class="menuf">
    
         
    </div>
    <div class="bodyc">
        <!--Start your Code Here -->
<br><br>
    <div class="row" >
        <div class="col-1 col-m-1">&nbsp;</div>
        <div class="custom border col-6 col-m-10">
            <h1>Registration via Form</h1>
            <div class="col-1">&nbsp;</div>
            <div class="first col-10">
                <div><span>Full Name</span>                     <span><input type="text" placeholder="Name" class="fname"/></span> </div>
                    <div><span>User Name</span>                    <span><input type="text" placeholder="Username" class="u_name"/></span> </div>
                    <div><span>Email ID</span>                     <span><input type="email" placeholder="Email-ID" class="e_id"/></span></div>
                    <div><span>College</span>                     <span><input list="college" name="college" placeholder="College" class="c_name">
                                                                            <datalist id="college">
                                                                                <option value="IITBHU">
                                                                                <option value="IITB">
                                                                                <option value="IITD">
                                                                                <option value="IITR">
                                                                                <option value="IITKgp">
                                                                                <option value="IITKgp">
                                                                            </datalist>
                                                                  </span>
                    </div>
                    <div><span>Password</span>                     <span><input type="password" placeholder="Minimum 8 characters" class="pfwd"/></span></div>
                    <div><span>Confirm Password</span>             <span><input type="password" placeholder="Minimum 8 characters" class="cpfwd"/></span></div>
                    <input type="button" value="Submit" class="mbtn1"/>
            </div>
<div class="middle col-10"><div class="col-1">&nbsp;</div><div class="col-10">A verification email has been sent to your registered email id.</div>
    
</div>

            <div class="second col-10">
                    <form method="POST" id="general_info" action="http://127.0.0.1:8000/polls/register/fill_details/">
                    <div><span>DoB</span>                     <span><input type="date" class="bday" /></span></div>
                    <div><span>Contact #</span>                        <span><input type="number" placeholder="Without +91 " class="phone"/></span></div>
                    <div><span>Profile Pic</span>                   <span><input type="file" class="fotu"/></span></div>
                    <input type="button" value="Submit" class="mbtn2"/>
                    </form>
                    <input type="button" value="Skip" class="skip"/>
            </div>
        </div>
        <div class="col-1 col-m-1">&nbsp;</div>
        <div class="socio col-3 border">
        {% if user and not user.is_anonymous %}
            <li>
            <a>Hello {{ user.get_full_name|default:user.username }}!</a>
            </li>
            <li>
            <a href="{% url 'auth:logout' %}?next={{ request.path }}">Logout</a>
            </li>
        {% else %}
            <h2>Social Login</h2>
            <br><br>
            <a href="{% url 'social:begin' 'facebook' %}?next={{ request.path }}"><img src="images/FBloginbutton.png" ></a>
            <a href="{% url 'social:begin' 'google-oauth2' %}?next={{ request.path }}"><img src="images/download.png"></a>
        {% endif %}
        </div>
    </div>
    <br><br><br><br><br>
        <!--End your Code Here -->
    <div class="mainfooter col-12">
        <div class="transbr"></div>
         <div class="transbl"></div>
    <p>"Sarvasv is an online platform of IIT BHU".</p>
        <hr size="3px" color="azure">
    <div class="midfooter">
        <marquee behavior="alternate" direction="left" width="100%">
         <img src="images/sspon.png" class="sponsors"> 
         <img src="images/sspon.png" class="sponsors">
         <img src="images/sspon.png" class="sponsors">
         <img src="images/sspon.png" class="sponsors">
         <img src="images/sspon.png" class="sponsors">
         <img src="images/sspon.png" class="sponsors">
         <img src="images/sspon.png" class="sponsors">
            </marquee>
       
    </div>
        <hr size="3px" color="azure">
    <p class="Poweredby">Powered by: Technex, IIT(BHU)</p>
       <div class="followus">
           <img src="images/fb.png">
        <img src="images/tw.png"  >
           <img src="images/yt.png"  >
           </div>
    <p class="block" padding="10%">&#169;Sarvasv2017</p>
    <div class="tc">
       <center><a href="terms and conditions.html"><u>Terms and Conditions</u></a></center> 
    </div>
    </div></div>
    </body>
</html>
<script>
    var validating=1;
    var maks_form2=0;
    var sEmail;
    var expr = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    $(document).ready(function(){
        function getCookie(c_name) 
        {
        if(document.cookie.length > 0) {
            c_start = document.cookie.indexOf(c_name + "=");
            if(c_start != -1) {
                c_start = c_start + c_name.length + 1;
                c_end = document.cookie.indexOf(";", c_start);
                if(c_end == -1) c_end = document.cookie.length;
                return unescape(document.cookie.substring(c_start,c_end));
            }
        }
        return "";
        }
        $(function () {
        $.ajaxSetup({
            headers: {
                "X-CSRFToken": getCookie("csrftoken")
            }
        });
           });
        $(".mbtn1").click(function(){
            if($(".fname").val()=="")
                {
                    validating=0; message("Name!","Enter Your Name");
                }
            else if($(".u_name").val()=="")
            {validating=0; message("Username!!","Enter Your Username");}
            else if($(".e_id").val()=="")
            {validating=0; message("Email Id!","Email Id is reqired.");}
            else if(!validateEmail($(".e_id").val()))
                {
                    validating=0; message("Email Id!","Invalid Email Id");
                }
            else if($(".c_name").val()=="")
            {validating=0; message("college!","College name is reqired.");}
            else if($(".pfwd").val().length<8)
            {validating=0; message("Password!","Password is less than of 8 characters");}
            else if($(".cpfwd").val()!=$(".pfwd").val())
            {validating=0;  message("Confirm Password!","Confirm Password is not same as Password");}
            else validating=1;
            if(validating==1)
            {
                $.ajax({url: "http://127.0.0.1:8000/polls/register/",dataType:"json",type:'POST',data:{name:$(".fname").val(),uname:$(".u_name").val(),eid:$(".e_id").val(),clg:$(".c_name").val(),pwd:$(".pfwd").val(),cpwd:$(".cpfwd").val(), csrfmiddlewaretoken: '{{ csrftoken }}'}, success: function(json){
                    if(json.status==0) {        
                                                $(".first").animate({opacity:"0"},"slow");
                                                $(".middle").css("display","block");
                                                $(".first").css("display","none");
                                                $(".middle").animate({opacity:"1"},"slow");
                                                maks_form2=1;
                                       }
                    else if(json.status==1)     message("Email!","Email Id already exist!");
                    else if(json.status==2)     message("Sorry!!","Username already exist.");
                    else if(json.status==3)     message("Technical problem!","Try after some time.");
                                        }, failure: function(){message("Ooops!","You may check your internet connection.");}});

            }
           });
        if(maks_form2)
            {   var idmaks= setInterval(form2checking(),3000);
                function form2checking(){
                    $.ajax({url: "http://127.0.0.1:8000/polls/register/",dataType:"json",type:'POST',data:{csrfmiddlewaretoken: '{{ csrftoken }}'}, success: function(json){if(json.output==1){
                $(".middle").animate({opacity:"0"});
                $(".second").css("display","block");
                $(".middle").css("display","none");
                $(".second").animate({opacity:"1"});
                clearInterval(idmaks);
                }}, failure: function(){message("Ooops!","You may check your internet connection.");}});
                }
            }
        $(".mbtn2").click(function(){
            
        });
    });
    function validateEmail(sEmail) {
    var filter = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    if (filter.test(sEmail)) {
        return true;
    }
    else {
        return false;}}
</script>