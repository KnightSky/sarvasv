{% extends "polls/base.html" %}
{% load static %}
{% comment %}<!DOCTYPE html>
<html>
<head>
    {% load static %}
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <div class="header">
        <img src="{% static "images/head.png"%}" class="head">

     </div>
    <img src="{% static "images/s_logo_2.png"%}" class="logo2">
    <img src="{% static "images/s_logo_1.png"%}" class="logo1">
    <div class="header2">
    <img src="{% static "images/arrow.png"%}" class="arrow">
        <img src="{% static "images/search.png"%}" class="search">

        <input type="text" class="searchb" >

        <span class="rightt">Sign in/up</span>

 <img src="{% static "images/glare.png"%}" class="glare">
    </div>

    <title>Sarvasv-IITBHU</title>
 <!-- css-->
    <link rel="stylesheet" type="text/css" href={% static "stylesheets/layout.css"%}>
    <link rel="stylesheet" type="text/css" href={% static "stylesheets/main.css"%}>{% endcomment %}

       {% block css_links %} <link rel="stylesheet" type="text/css" href={% static "stylesheets/quizm.css"%}>{% endblock %}
 <!-- Scripts -->
    {% comment %}<script src="{% static "scripts/jquery-2.2.1.min.js"%}" type="text/javascript"></script>
     <script src="{% static "scripts/layout.js"%}" type="text/javascript"></script>{% endcomment %}


{% comment %}<div class="messagebox"><div class="messagetitle"></div><div class="messagetext"></div>
</div><div class="closingmessage">Â«</div>

<body>
<div class="loaderfade"></div>
<div class="border4"><div class="border3"></div>
    <div class="border2"></div>
    <div class="border1"></div>
    <img src="{% static "images/s_logo_2.png" %}" class="flags">
    <img src="{% static "images/s_logo_1.png" %}" class="globe"></div>
<div class="bodym">

    <img src="{%  static "images/logobed.png"%}" class="logobed">
    <ul>
        <li><span class="plus">Events</span>
        <ul>
                <li><a href="#">kulfi</a></li>
                <li>cone</li>
                <li>cup</li>
                <li>bar</li>
                <li>hello</li>
            <li>hello1</li>
            <li>hello2</li>
            <li>hello3</li>
            <li>hello4</li>
            </ul></li>
        <li ><span class="plus">Leaderboard</span>
            <ul>
                <li>kulfi</li>
                <li>cone</li>
                <li>cup</li>
            </ul>
        </li>
        <li><a>Forum</a></li>
        <li><a>Library</a></li>
        <li><a>About Us</a></li>
    </ul>
    <form method="post" action="">
        {% csrf_token %}
    <fieldset>
        <legend>Login</legend>
        <input type="text" name="uname" placeholder="User name">
        <br><input type="password" name="pwd" placeholder="Password">
        <br><input type="submit" value=" Login ">
        <ul><li><a href="#">Forgot Password ?</a></li><li><a href="#">Register</a></li></ul>
        </fieldset>
    </form>
    <img src="{% static "images/menu_foot.png" %}" class="menuf">


    </div>{% endcomment %}
    {% block body_block %}

    <div class="bodyc">
        <br>
        <div class="row">
        <div class="col-12 quizml">
            <h1>Quiz Master's Portal</h1>
            <h2>{{ quizname }}</h2>
        {% csrf_token %}
         {% for i in limits %}
            <span id="b{{ i }}"><select id="a{{ i }}" name="a{{ i }}"><option>Options</option><option>Edit</option><option>Delete</option>fghfgvh</select></span>
        {% endfor %}
        </div>
<script type="text/javascript">
    var qarray={{ qarray|safe }};
    for (var i=0;i<{{ up }};i++)
    {
     $("#b"+i).prepend("Q"+(i+1)+". "+qarray[i]);
    }
</script>

        </div> <div class="row">
        <div class="col-12 quizmf">
            <span class="cross">X</span>
           <form method="post" enctype="multipart/form-data" action="/polls/register/QuizReg/EditOrCreate/{{ quizname }}/">
               {% csrf_token %}
               <input type="text" name="qid" value="0">Question:

            <textarea name="ques" ></textarea>
              Type
                <select name="type" class="qty">
                   <option>Single Correct</option>
                <option>Multi Correct</option>
                    <option>input</option>

               </select>

            <span class="noo">Number of options:</span>
               <select name="nq" class="rtyu">
                   <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
                <option>6</option>
                <option>7</option>
                <option>8</option>
                <option>9</option>
                <option>10</option>
               </select>
               <span class="vimg">View Image</span> <span class="cimg">Change Image</span><span class="oimg"> Image:<input type="file" name="imageabc"></span>
               <input name="imgld" class="imgld" value="1" hidden>
            <div class="options">
                 <input type='checkbox' name="c1"><input type='text' placeholder='Enter Option #1' name="o1"><br>
                 <input type='checkbox' name="c2"><input type='text' placeholder='Enter Option #2' name="o2"><br>
                 <input type='checkbox' name="c3"><input type='text' placeholder='Enter Option #3' name="o3"><br>
                 <input type='checkbox' name="c4"><input type='text' placeholder='Enter Option #4' name="o4"><br>
                 <input type='checkbox' name="c5"><input type='text' placeholder='Enter Option #5' name="o5"><br>
                 <input type='checkbox' name="c6"><input type='text' placeholder='Enter Option #6' name="o6"><br>
                 <input type='checkbox' name="c7"><input type='text' placeholder='Enter Option #7' name="o7"><br>
                 <input type='checkbox' name="c8"><input type='text' placeholder='Enter Option #8' name="o8"><br>
                 <input type='checkbox' name="c9"><input type='text' placeholder='Enter Option #9' name="o9"><br>
                 <input type='checkbox' name="c10"><input type='text' placeholder='Enter Option #10' name="o10"><br>
               </div>
               <input type="submit" value="ok">
            </form>

            </div>
        </div><br>
       <center> <input type="button" onclick="$('.quizmf').slideDown();" value="Add new Question"></center>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <script type="text/javascript">

            $(document).ready(function(){
function getCookie(c_name) {
        if(document.cookie.length > 0) {
            c_start = document.cookie.indexOf(c_name + "=");
            if(c_start != -1) {
                c_start = c_start + c_name.length + 1;
                c_end = document.cookie.indexOf(";", c_start);
                if(c_end == -1) c_end = document.cookie.length;
                return unescape(document.cookie.substring(c_start,c_end));
            }
        }
        return "";
    }

       $(function () {
        $.ajaxSetup({
            headers: {
                "X-CSRFToken": getCookie("csrftoken")
            }
        });
           });
     $(".oimg").css("display","inline-block");
                $(".vimg").css("display","none");
                $(".cimg").css("display","none");
    $(".rtyu").change(function(){

      var i;
        for( i=1;i<=parseInt($(".rtyu").val());i++){
           $(".options>input[name='c"+i+"']").css("display","inline");
            $(".options>input[name='o"+i+"']").css("display","inline");

        }
           for(;i<=20;i++) {
              $(".options>input[name='c"+i+"']").css("display","none");
            $(".options>input[name='o"+i+"']").css("display","none");
           }
    });
    $(".qty").change(function(){

         $(".oimg").css("display","inline-block");
                $(".vimg").css("display","none");
                $(".cimg").css("display","none");
       if($(".qty").val()=="input")
       {
             $(".noo").css("display","none");
            $(".rtyu").css("display","none");
            $(".options>input[name='c1']").css("display","none");
           $(".options>input[name='o1']").attr("placeholder","Enter Answer");
           var i=2;
           for(;i<=20;i++) {
              $(".options>input[name='c"+i+"']").css("display","none");
            $(".options>input[name='o"+i+"']").css("display","none");
           }
       }else{

           $(".noo").css("display","inline-block");
            $(".rtyu").css("display","inline-block");
            $(".options>input[name='c1']").css("display","inline-block");
            $(".options>input[name='o1']").css("display","inline-block");
            $(".options>input[name='o1']").attr("placeholder","Enter Option #1");

       }
    });

  $(".cross").click(function(){
    
       $(".imgld").val("1");
       $(".oimg").css("display","inline-block");
                $(".vimg").css("display","none");
                $(".cimg").css("display","none");
     $(".quizmf").slideUp();
        $(".noo").css("display","inline-block");
            $(".rtyu").css("display","inline-block");
            $(".options>input[name='c1']").css("display","inline-block");
            $(".options>input[name='o1']").css("display","inline-block");
            $(".options>input[name='o1']").attr("placeholder","Enter Option #1");
      $(".quizml>span>select>option:nth-child(1)").prop("selected",true);
       $(".quizmf textarea").val("");
                  $(".quizmf input[name='qid']").val("0");

                    $(".rtyu option:nth-child(1)").prop("selected", true);
      $(".qty option:nth-child(1)").prop("selected", true);
  $(".quizmf input[name='o"+1+"']").val("");
                  $(".quizmf input[name='c"+1+"']").prop("checked",0);
        for( i=2;i<=10;i++){
           $(".options>input[name='c"+i+"']").css("display","none");
            $(".options>input[name='o"+i+"']").css("display","none");
            $(".quizmf input[name='o"+i+"']").val("");
                  $(".quizmf input[name='c"+i+"']").prop("checked",0);
        }


 });

$(".cimg").click(function(){
$(".oimg").css("display","inline-block");
         
          $(".imgld").val("0");
          $(".vimg").css("display","inline-block");
          $(".cimg").css("display","none");


});



      $(".quizml>span>select").change(function(){

          var jid=$(this).attr("id");
             $(".oimg").css("display","none");
         
          $(".imgld").val("1");
          $(".vimg").css("display","inline-block");
          $(".cimg").css("display","inline-block");
        if($(this).val()=="Edit"){

              $.ajax({
                  url: 'http://127.0.0.1:8000/polls/register/test2/{{ quizname }}/',
                  dataType:"json",
                  type:'POST',
                  data:{qid:jid,
                        csrfmiddlewaretoken: '{{ csrftoken }}'},
                  success: function(json){
                      $(".vimg").click(function(){r
                          window.open(json.image,"_blank");
                      });
                $(".quizmf textarea").val(json.ques);
                  $(".quizmf input[name='qid']").val(json.id);
                             $(".noo").css("display","inline-block");
            $(".rtyu").css("display","inline-block");
            $(".options>input[name='c1']").css("display","inline-block");
            $(".options>input[name='o1']").css("display","inline-block");
            $(".options>input[name='o1']").attr("placeholder","Enter Option #1");
                  var n=parseInt(json.noptions);
                      if(json.type=="Single Correct") {$(".qty option:nth-child(1)").prop("selected", true);
                       $(".rtyu option:nth-child("+n+")").prop("selected", true);
                   var i;
                var option= json.option;
              var ans= json.ans;
        for( i=1;i<=n;i++){
           $(".options>input[name='c"+i+"']").css("display","inline");
            $(".options>input[name='o"+i+"']").css("display","inline");
            $(".quizmf input[name='o"+i+"']").val(option[i]);
                  $(".quizmf input[name='c"+i+"']").prop("checked",parseInt(ans[i]));
        }

           for(;i<=10;i++) {
              $(".options>input[name='c"+i+"']").css("display","none");
            $(".options>input[name='o"+i+"']").css("display","none");

           }}
                      else if(json.type=="Multi Correct"){$(".qty option:nth-child(2)").prop("selected", true);
                       $(".rtyu option:nth-child("+n+")").prop("selected", true);
                   var i;
                var option= json.option;
              var ans= json.ans;
        for( i=1;i<=n;i++){
           $(".options>input[name='c"+i+"']").css("display","inline");
            $(".options>input[name='o"+i+"']").css("display","inline");
            $(".quizmf input[name='o"+i+"']").val(option[i]);
                  $(".quizmf input[name='c"+i+"']").prop("checked",parseInt(ans[i]));
        }

           for(;i<=10;i++) {
              $(".options>input[name='c"+i+"']").css("display","none");
            $(".options>input[name='o"+i+"']").css("display","none");

           }}
                      else{ $(".qty option:nth-child(3)").prop("selected", true);
                        $(".noo").css("display","none");
            $(".rtyu").css("display","none");
            $(".options>input[name='c1']").css("display","none");
           $(".options>input[name='o1']").attr("placeholder","Enter Answer");
                          var option= json.option;
                          $(".options>input[name='o1']").val(option[1]);
           var i=2;
           for(;i<=20;i++) {
              $(".options>input[name='c"+i+"']").css("display","none");
            $(".options>input[name='o"+i+"']").css("display","none");


                      }}


                   // $(".quizmf input[name='c1']").val("");
                  //$(".quizmf input[name='o1']").val("");
                    $(".quizmf").slideDown();


     }});

         }              else if(confirm("Are you sure to delete the question?")){

                  $.ajax({url: "http://127.0.0.1:8000/polls/register/test3/{{ quizname }}/",dataType:"json",type :'POST',data:{qid:jid,csrfmiddlewaretoken: '{{ csrftoken }}'}, success: function(json){
                      if(json.chk==1){
                          window.open("http://127.0.0.1:8000/polls/register/QuizReg/Delete/{{ quizname }}/","_self")
                      }

                  }});
              }
      });
});

        </script>

{% endblock %}
    {% comment %}<div class="mainfooter col-12">


        <div class="transbr"></div>
         <div class="transbl"></div>
    <p>"Sarvasv is an online platform".</p>
        <hr size="3px" color="azure">
    <div class="midfooter">
        <marquee behavior="alternate" direction="left" width="100%">
         <img src="{% static "images/sspon.png"%}" class="sponsors">
         <img src="{% static "images/sspon.png"%}" class="sponsors">
         <img src="{% static "images/sspon.png"%}" class="sponsors">
         <img src="{% static "images/sspon.png"%}" class="sponsors">
         <img src="{% static "images/sspon.png"%}" class="sponsors">
         <img src="{% static "images/sspon.png"%}" class="sponsors">
         <img src="{% static "images/sspon.png"%}" class="sponsors">
            </marquee>

    </div>
        <hr size="3px" color="azure">
    <p class="Poweredby">Powered by: Technex, IIT(BHU)</p>
       <div class="followus">
           <img src="{% static "images/fb.png"%}" >
        <img src="{% static "images/tw.png"%}" >
           <img src="{% static "images/yt.png"%}" >
           </div>
    <p class="block" padding="10%">&#169;Sarvasv2016</p>
    <div class="tc">
       <center><a href="terms and conditions.html"><u>Terms and Conditions</u></a></center>
    </div>
    </div>{% endcomment %}
    </div>
</body>
